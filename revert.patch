commit e3b9b95bf3b8639415569ee381fdcbb14a09f912
Author: SmeagolWorms4 <smeagolworms4@gmail.com>
Date:   Sun Feb 15 17:50:18 2026 +0100

    relative path

diff --git a/web/index.html b/web/index.html
index 438aa24..a37f680 100644
--- a/web/index.html
+++ b/web/index.html
@@ -19,6 +19,7 @@
         --warn: #f59e0b;
         --bad: #ef4444;
       }
+
       body {
         margin: 0;
         font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
@@ -26,7 +27,9 @@
         background: var(--bg);
         color: var(--text);
       }
+
       .wrap { max-width: 980px; margin: 0 auto; padding: 24px; }
+
       .card {
         background: var(--card);
         border: 1px solid var(--border);
@@ -34,6 +37,7 @@
         padding: 18px;
         box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
       }
+
       .topbar {
         display: flex;
         align-items: center;
@@ -41,7 +45,9 @@
         gap: 12px;
         flex-wrap: wrap;
       }
+
       h1 { font-size: 18px; margin: 0; font-weight: 650; }
+
       .row {
         display: flex;
         gap: 12px;
@@ -49,6 +55,7 @@
         flex-wrap: wrap;
         margin-top: 12px;
       }
+
       .status-pill {
         display: inline-flex;
         align-items: center;
@@ -60,6 +67,7 @@
         color: var(--muted);
         font-size: 13px;
       }
+
       .dot { width: 10px; height: 10px; border-radius: 999px; background: var(--muted); }
       .dot.good { background: var(--good); }
       .dot.warn { background: var(--warn); }
@@ -74,11 +82,13 @@
         color: white;
         background: var(--btn);
       }
+
       button.secondary {
         background: var(--btn2);
         color: var(--text);
         border: 1px solid var(--border);
       }
+
       button:disabled { opacity: 0.55; cursor: not-allowed; }
 
       .hint {
@@ -132,16 +142,34 @@
         padding: 8px 10px;
         outline: none;
       }
-      select option { background-color: #222; color: #fff; }
-
+      select option {
+        background-color: #222;
+        color: #fff;
+      }
+      
       .devices-card { margin-top: 16px; }
-      .section-title { margin-bottom: 10px; font-size: 16px; font-weight: 650; }
+
+      .section-title {
+        margin-bottom: 10px;
+        font-size: 16px;
+        font-weight: 650;
+      }
+
       .list { margin-top: 10px; }
-      .item { padding: 8px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.06); }
+
+      .item {
+        padding: 8px 0;
+        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
+      }
+
       .item-title { font-weight: 650; }
       .item-sub { color: var(--muted); font-size: 12px; }
 
-      .split { margin-top: 14px; border-top: 1px solid var(--border); padding-top: 14px; }
+      .split {
+        margin-top: 14px;
+        border-top: 1px solid var(--border);
+        padding-top: 14px;
+      }
 
       code.key {
         display: inline-block;
@@ -211,7 +239,6 @@
           </div>
         </div>
 
-        <!-- Add custom -->
         <div class="split">
           <div class="section-title">{{ t('addCustomDevice') }}</div>
 
@@ -272,38 +299,6 @@
           </div>
         </div>
 
-        <!-- Sound -->
-        <div class="split">
-          <div class="section-title">{{ t('sound') }}</div>
-
-          <div class="row" style="margin-top:0;">
-            <select v-model="soundDeviceId" style="min-width:320px;">
-              <option disabled value="">{{ t('selectDevice') }}</option>
-              <option v-for="(d, idx) in devices" :key="'s'+idx" :value="d.id">
-                {{ (d.name || '(no name)') + ' â€” ' + (d.id || '') }}
-              </option>
-            </select>
-
-            <button class="secondary" :disabled="busySound || !soundDeviceId" @click="playSound">
-              {{ busySound ? t('working') : t('playSound') }}
-            </button>
-
-            <button class="secondary" :disabled="busySound || !soundDeviceId" @click="stopSound">
-              {{ busySound ? t('working') : t('stopSound') }}
-            </button>
-
-            <button class="secondary" :disabled="!soundResult" @click="copyText(soundResult)">
-              {{ t('copy') }}
-            </button>
-          </div>
-
-          <div v-if="soundMsg" class="hint" style="margin-top:8px;">{{ soundMsg }}</div>
-
-          <div v-if="soundResult" class="hint" style="margin-top:10px;">
-            <pre class="error-box" style="max-height:260px; overflow:auto;">{{ soundResult }}</pre>
-          </div>
-        </div>
-
       </div>
     </div>
 
@@ -355,13 +350,7 @@
             selectedDeviceId: "",
             busyLocate: false,
             locateMsg: "",
-            locateResult: "",
-
-            // sound
-            soundDeviceId: "",
-            busySound: false,
-            soundMsg: "",
-            soundResult: ""
+            locateResult: ""
           };
         },
 
@@ -370,7 +359,7 @@
             const I = this.i18n || {};
             const result = (I[this.lang] && I[this.lang][key]) || (I.en && I.en[key]) || null;
             if (result === null) {
-              console.warn('Translation not found "'+key+'"');
+              console.warn('Transaltion not found "'+key+'"');
               return key;
             }
             return result;
@@ -437,9 +426,6 @@
             this.selectedDeviceId = "";
             this.locateMsg = "";
             this.locateResult = "";
-            this.soundDeviceId = "";
-            this.soundMsg = "";
-            this.soundResult = "";
             this.errorMsg = reasonText || this.t("authFailed");
 
             this.armAutoReauthCooldown(8000);
@@ -451,7 +437,7 @@
               this.errorMsg = "";
               this.setStatus("warn", this.t("checking"));
 
-              const s = await this.apiGet("/api/connection/status");
+              const s = await this.apiGet("api/connection/status");
               this.connected = !!s.connected;
 
               if (this.connected) {
@@ -476,7 +462,7 @@
 
           async pollAuthStatus() {
             try {
-              const st = await this.apiGet("/api/auth/status");
+              const st = await this.apiGet("api/auth/status");
 
               if (st.running) {
                 this.setStatus("warn", this.t("authenticating"));
@@ -523,7 +509,7 @@
 
             try {
               this.setStatus("warn", this.t("startingVnc"));
-              const nv = await this.apiPost("/api/novnc/start");
+              const nv = await this.apiPost("api/novnc/start");
               if (!nv.iframe_url) throw { status: 500, json: { error: "noVNC start returned no iframe_url" } };
 
               this.iframeVisible = true;
@@ -531,7 +517,7 @@
 
               this.authStarted = true;
               this.setStatus("warn", this.t("authenticating"));
-              await this.apiPost("/api/auth/start");
+              await this.apiPost("api/auth/start");
               this.startPolling();
             } catch (e) {
               this.setStatus("bad", this.t("failedToStart"));
@@ -551,15 +537,12 @@
             this.busyDevices = true;
 
             try {
-              const r = await this.apiGet("/api/devices");
+              const r = await this.apiGet("api/devices");
               this.devices = Array.isArray(r.devices) ? r.devices : [];
 
               if (this.selectedDeviceId && !this.devices.find(d => d.id === this.selectedDeviceId)) {
                 this.selectedDeviceId = "";
               }
-              if (this.soundDeviceId && !this.devices.find(d => d.id === this.soundDeviceId)) {
-                this.soundDeviceId = "";
-              }
             } catch (e) {
               const j = (e && e.json) ? e.json : {};
               if (e.status === 401 && j.code === "REAUTH_REQUIRED") {
@@ -579,7 +562,7 @@
             this.busyAdd = true;
 
             try {
-              const r = await this.apiPost("/api/devices/custom", {});
+              const r = await this.apiPost("api/devices/custom", {});
               this.addMsg = this.t("addedOk");
               if (r && r.advertisement_key) this.advKey = r.advertisement_key;
               await this.loadDevices();
@@ -599,7 +582,7 @@
             this.busySecrets = true;
             this.secretsText = "";
             try {
-              const r = await this.apiGet("/api/secrets");
+              const r = await this.apiGet("api/secrets");
               this.secretsText = (r && r.secrets_text) ? r.secrets_text : "";
               if (!this.secretsText) this.secretsText = "(empty)";
             } catch (e) {
@@ -616,10 +599,9 @@
             this.busyLocate = true;
 
             try {
-              const r = await this.apiPost("/api/devices/locate", { device_id: this.selectedDeviceId });
+              const r = await this.apiPost("api/devices/locate", { device_id: this.selectedDeviceId });
               this.locateMsg = this.t("locateOk");
-              // backend renvoie stdout
-              this.locateResult = (r && r.stdout) ? r.stdout : JSON.stringify(r, null, 2);
+              this.locateResult = JSON.stringify(r.location ?? r, null, 2);
             } catch (e) {
               const j = (e && e.json) ? e.json : {};
               if (e.status === 401 && j.code === "REAUTH_REQUIRED") {
@@ -632,35 +614,6 @@
             }
           },
 
-          async playSound() {
-            await this.soundAction(true);
-          },
-
-          async stopSound() {
-            await this.soundAction(false);
-          },
-
-          async soundAction(enable) {
-            this.soundMsg = "";
-            this.soundResult = "";
-            this.busySound = true;
-
-            try {
-              const r = await this.apiPost("/api/devices/sound", { device_id: this.soundDeviceId, enable: !!enable });
-              this.soundMsg = this.t("soundOk");
-              this.soundResult = JSON.stringify(r, null, 2);
-            } catch (e) {
-              const j = (e && e.json) ? e.json : {};
-              if (e.status === 401 && j.code === "REAUTH_REQUIRED") {
-                await this.triggerReauth(`${this.t("authFailed")}\n${j.details || ""}`);
-                return;
-              }
-              this.soundMsg = `${this.t("soundFailed")} ${this.formatApiError(e)}`;
-            } finally {
-              this.busySound = false;
-            }
-          },
-
           async copyText(txt) {
             const s = txt || "";
             try {
